{% extends 'base.html' %}
{% block title %}Send Money{% endblock %}

{% block content %}
  <p>Enter the Stellar address you'd like to send money to:
  <form action="/send_conf" method="POST">
    <p><input type="text" name="recipient_address" size="72" id="recipient_address" required pattern="[G][A-Z0-9]{55}"></p>
<br>
  <p>Memo (may not be required - confirm with recipient):</p>
  <h5>If you are sending XLM to an exchange (Coinbase, Binance, etc.),
    you will very likely need a memo!</h5>
    <label for="memo"></label>
    <p><input type="text" name="memo"></p>
<br>
  <p>Amount (XLM):</p>
    <label for="amount"></label>
    <p><input type="number" name = "amount" min="0.001" max="{{ session.get('user_balance') }}" step="0.0000001" required pattern="[0-9]"></p>
  <p>Note that XLM is only precise to seven decimal places.</p>
  {% if user_balance > 1 %}
    <div id ="submit_transaction_button"><p><button type="submit"
      onclick="disableSubmit">Submit Transaction</button></p></div>
    {% else %}
    <div id ="submit_transaction_button"><p><button disabled type="submit"
      onclick="disableSubmit">Submit Transaction</button></p></div>
      <p>You need to fund your account first!</p>
    {% endif %}
    <p>Current network fee: {{ fee }} stroops ({{ fee_xlm }} XLM)</p>
  </form>
<script>
  function disableSubmit(){
    var x = document.getElementById("submit_transaction_button");
    x.disabled = true;
  }
</script>
{% endblock %}